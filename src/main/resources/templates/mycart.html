<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyCart</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
            background-color: rgb(237, 229, 229);
        }

        header {
            background: linear-gradient(to right, #4e5f94, rgb(237, 229, 229));
            /* background: linear-gradient(to right, #0c2167, rgb(237, 229, 229)); */
        }

        


        .logo {
            height: 50px;
            width: 100px;
        }

        .nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            /* Distribute left and right content */
            padding: 0px 30px;

        }

        .left-section {
            display: flex;
            align-items: center;
        }

        .h1 {
            font-size: 35px;
            margin-left: 10px;
            color: rgb(40, 35, 35);
        }


        .right-section a {
            /* display: flex; */
            font-size: 20px;
            text-decoration: none;
            color: black;
            padding: 2px 20px;

            /* padding-left: 20px;
            margin-top: 0%;
            padding-top: 0%; */


            border-radius: 8px;
            transition: all 0.3s ease;
        }

        /* .register{
            margin-left: 1px;
        } */

        .right-section a:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        h1,
        h2 {
            font-size: 20px;
        }

        h3 {
            font-size: 15px;
            font-weight: 300;
        }

        button {
            font-size: 15px;
            background-color: rgb(219, 180, 72);
            border-radius: 5px;
            color: black;
            text-decoration: none;
        }

        button:hover {
            font-size: 16px;
            background-color: rgb(235, 163, 91);
            border-color: #951c0d;
        }

        .btn a{
            color: black;
            text-decoration: none;
             
        }
        
        /* #vehicle1st {
            border-radius: 5px;
            box-shadow: 2px 3px 2px;
            margin: 40px;

            text-align: center;
            display: inline;
            justify-content: center;


        } */

        #vehicle1st{

            border-radius: 5px;
            text-align: center;
            text-decoration: double;


        }
        #vehicle1st img{
            margin-left: 15px;
        }
    </style>
</head>

<body>


    <header>
        <nav class="nav">
            <div class="left-section">
                <img src="https://www.pngkey.com/png/full/291-2919237_adler-pelzer-group-launches-evo-solution-for-new.png"
                    alt="evo charge" class="logo">
                <h1 class="h1">Charge</h1>
            </div>

            <div class="right-section">
                <a th:href="@{/User/vehicle}" class="login">View Vehicle</a>
                <!-- <a th:href="@{/User/cart}" class="register">MyCart</a> -->
                <a th:href="@{/User/orders}">Order</a>
                <!-- <a th:href=""></a> -->
                <a th:href="@{/logout}">Logout</a>
            </div>
        </nav>

    </header>

    <!-- <div class="cartitems"> -->
    <!-- <img src="" alt=""> -->

    <!-- <img th:src="${item.image}" alt="Vehicle Image" width="100">

        <div>
            
        </div>
    </div> -->

    <div class="grey-ola" id="vehicle1st" th:each="item : ${items}"
        style="margin: 25px; box-shadow: 5px 5px 5px 5px #a3a5a9; margin-bottom: 70px; background-color: white; display: flex;" >

        <div>

            <img th:src="${item.image}" alt="Vehicle Image" width="400" height="300"
                th:id="'itemImage-' + ${item.cartItemId}">

        </div>

        <div style="margin-top: 50px; display: block; padding-left: 80px;">
            <!-- <span><b>Brand :- </b></span>
            <span th:text="${vehicle.brand}" class="data" id="data12" ></span> <br> <br> -->

            <span><b>Model Name :- </b></span>
            <span th:text="${item.modelname}" th:id="'itemModel-' + ${item.cartItemId}"></span><br><br>

            <span><b>Price :-</b> </span>
            <span th:text="${item.price}" th:id="'itemPrice-' + ${item.cartItemId}"></span><br><br>

            <!-- <span><b>Range (km/charge) :-</b> </span>
            <span th:text="${vehicle.rangeKm}" class="data" id="data12"></span><br><br>

            <span><b>Battery Capacity :- </b></span>
            <span th:text="${vehicle.batteryCapacity}"></span> <br> <br> -->


            <span><b>Description :- </b></span>
            <span th:text="${item.description}" class="itemDesc" id="data12"></span><br><br>

            <span style="color: rgb(125, 189, 28);"><b>In Stock </b></span> <br><br>

            <!-- <button class="addtocart"  id="button">Add to Cart</button> -->

            <!-- <button id="button" style="margin-left: 0px;" onclick="payment([[${item.cartItemId}]])">Buy Now</button> -->

            <button onclick="payment(this)" th:data-id="${item.cartItemId}" style="margin-left: 0px;">Buy Now</button>
            <button class="btn"><a th:href="@{/User/removecartitem/{id}(id = ${item.cartItemId})}">Remove from Cart</a></button>
            <!-- <button><a th:href="@{/User/payfororder/{modelname}}">Payment</a></button> -->
        </div>
    </div>


    <script>
        function payment(buttonElement) {


            const id = buttonElement.dataset.id;

            const modelname = document.getElementById("itemModel-" + id).textContent;
            const price = parseFloat(document.getElementById("itemPrice-" + id).textContent.trim());
            const image = document.getElementById("itemImage-" + id).src;

            console.log("price " + price);

            const paymentitem = { modelname, price, image };

            fetch("/User/payment", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                credentials: "include",
                //   credentials: "same-origin",      // ðŸ‘ˆ REQUIRED
                mode: "same-origin",
                body: JSON.stringify(paymentitem)
            })
                .then(response => {
                    if (response.ok) {
                        alert("Order placed successfully");
                        // return "/User/payfororder/{modelname}";
                    } else {
                        alert("Please LOGIN to order an item");
                    }
                })
                .catch(err => console.error("Error ordering an item:", err));

        }
    </script>

    <!-- <table>
        <thead>
            <tr>
                <th>Model name:-</th>
                <th>Image </th>
                <th>price</th>
                <th>description</th>
            </tr>
        </thead>

        <tbody>
            <tr th:each="item : ${items}">
                <td th:text="${item.modelname}"></td>
                <td th:src="${item.image}"></td> -->

    <!-- <td>
                    <img th:src="${item.image}" alt="Vehicle Image" width="100">
                </td>
                <td th:text="${item.price}"></td>
                <td th:text="${item.description}"></td>
            </tr>
        </tbody>
    </table> -->
</body>

</html>